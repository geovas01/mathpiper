%mathpiper,def="MathExpDoubling",scope="private"

/// Identity transformation, compute Exp(x) from value=Exp(x/2^n) by squaring the value n times
Defun("MathExpDoubling", {value, n})
[
	Local(shift, result);
	SetVariable(shift, n);
	SetVariable(result, value);
	While (IsGreaterThan(shift,0))	// will lose 'shift' bits of precision here
	[
		SetVariable(result, MultiplyN(result, result));
		SetVariable(shift, AddN(shift,MathNegate(1)));
	];
	result;
];

%/mathpiper