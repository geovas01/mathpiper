%mathpiper,name="miscellaneous",subtype="automatic_test"

Testing("From: calculus.mpt");

Testing("UnaryFunctionInverses");
Verify(Sin(ArcSin(a)),a);
Verify(Cos(ArcCos(a)),a);
//TODO ??? Verify(Tan(ArcTan(a)),a);
//TODO ??? this is not always the correct answer! Verify(ArcTan(Tan(a)),a);
Verify(Tan(Pi/2),Infinity);
Verify(Tan(Pi),0);
Verify( Sin(x)/Cos(x), Tan(x) );
Verify( TrigSimpCombine(Sin(x)^2 + Cos(x)^2), 1 );
Verify( Sinh(x)-Cosh(x), Exp(-x));
Verify( Sinh(x)+Cosh(x), Exp(x) );
Verify( Sinh(x)/Cosh(x), Tanh(x) );
Verify( Sinh(Infinity), Infinity);
Verify( Sinh(x)*Csch(x), 1);
Verify( 1/Coth(x), Tanh(x) );
Verify(2+I*3,Complex(2,3));
Verify(Magnitude(I+1),Sqrt(2));
Verify(Re(2+I*3),2);
Verify(Im(2+I*3),3);
// Shouldn't these be in linalg.yts?
Verify(ZeroVector(3),{0,0,0});
Verify(BaseVector(2,3),{0,1,0});
Verify(Identity(3),{{1,0,0},{0,1,0},{0,0,1}});


Testing("Checking comment syntax supported");
[
  Local(a);
  /* something here */
  a:= 3;
  // test 1

  // /* test2 */

  /* // test3 */

  //Echo({a, Nl()});

  // Check parsing
  a==-b; // This would generate a parse error in Yacas versions 1.0.54 and earlier
];




Testing("Yacas tutorials and journal entries.");
Verify(1+1,2);
Verify("This text","This text");
Verify(2+3,5);
Verify(3*4,12);
Verify(-(3*4),-12);
Verify(2+3*4,14);
Verify(6/3,2);
Verify(1/3,1/3);
Verify(IsNumber(N(1/3)),True);
Verify(Sin(Pi),0);
Verify(Minimum(5,1,3,-5,10),-5);
Verify(Sqrt(2),Sqrt(2));
Verify({1,2,3},{1,2,3});
Verify({a,b,c}[2],b);
Verify("abc"[2],"b");
Verify(x^(1/2),Sqrt(x));


// Yacas used to not simplify the following, due to Pi being
// considered constant. The expression was thus not expanded
// as a univariate polynomial in Pi
TestMathPiper(2*Pi/3,(Pi-Pi/3));
TestMathPiper(( a*(Sqrt(Pi))^2/2), (a*Pi)/2);
TestMathPiper(( 3*(Sqrt(Pi))^2/2), (3*Pi)/2);
TestMathPiper(( a*(Sqrt(b ))^2/2), (a*b)/2);

TestMathPiper(Sin(Pi-22),-Sin(22-Pi));
TestMathPiper(Cos(Pi-22), Cos(22-Pi));


Verify( Infinity + I, Complex(Infinity,1) );
Verify( Infinity - I, Complex(Infinity,-1) );
Verify( I - Infinity,Complex(-Infinity,1) );
Verify( I + Infinity, Complex(Infinity,1) );
Verify( I*Infinity,Complex(0,Infinity)); //Changed Ayal: I didn't like the old definition
Verify( -I*Infinity,Complex(0,-Infinity)); //Changed Ayal: I didn't like the old definition
Verify( Infinity*I,Complex(0,Infinity)); //Changed Ayal: I didn't like the old definition
Verify( Infinity^I,Undefined);//Changed Ayal: I didn't like the old definition (it is undefined, right?)
Verify( (2*I)^Infinity, Infinity );
Verify( Infinity/I,Infinity );
Verify( Sign(Infinity), 1 );
Verify( Sign(-Infinity), -1 );

%/mathpiper