



%group,description="Examples from ps3_6502_programming."

%uasm65,description=""
;Program Name: sum10.asm.
;
;Version: 1.1
;
;Description: In this program, the sum of the 
; numbers between 1 and 10 inclusive will be 
; determined.

;**************************************
;Variables area.
	org 0200h
	
;Holds the accumulating sum.
sum	dbt d

;Holds the current number
; that is being added to sum and also
; is used to determine when the summing
; loop should be exited.
count 	dbt 0d


;**************************************
;Program entry point.
	org 0210h
	
;Place 0 into variable sum.
	lda #0d
	sta sum
	
;Place 1 into variable count.
	lda #1d
	sta count
	
;Top of summing loop.
LoopTop *

;Add count to sum and place result back into sum.
	lda sum
	clc
	adc count
	sta sum
	
;Add 1 to count.
	inc count
	
;If count is not equal to 11 yet then branch back
; to LoopTop.
	lda count
	cmp #11d
	bne looptop
	
;Exit program.
	brk
	
	end
    
%/uasm65




%uasm65,description=""
;Program Name: largest.asm.
;
;Version: 1.0.
;
;Description: Find the largest number in a list 
; of 100 numbers.
;
;Assumptions: The numbers in the list will be no 
; lower than 0 and no higher than 255.


;**************************************
;Program entry point.
	org 0200h

;This program will use the X register to point
; to the current number in the list
; instead of a variable called 'index'.
;
;Initialize register X to refer to offset 0 into
; the list of numbers starting at 'list'.
	ldx #0d
	
;Compare the number that X is referring to in the
; list to the number that is in 'largest'.  If the
; number being pointed to is larger than the contents
; of the variable 'largest', then fall through to
; the code that will replace the contents of 'largest'
; with the new number.
LoopTop  *
	lda list,x
	cmp largest
	bcc NotLarger
	
IsLarger  *

;Replace the number in 'largest' with the current
; number from the list.
	sta largest

NotLarger  *

;Increment the X register so that it references the
; next number in the list.
	inx

;Check to see if the end of the list has been reached.
; If it has, then exit the program.  If it has not, 
; then branch back to the top of the loop.
CheckListEnd  *
	cpx #100d
	bne LoopTop
	
;Exit the program.
	brk


;**************************************
;Variables area.
;
;In this program, the variables area is being placed
; below the code because the variables take up
; a significant amount of memory.  This makes
; it more difficult to determine where the variables
; area ends so that the start of the code area
; can be determined.


;Holds the largest number 
; encountered so far in the list.
; ( Notice that variables can
; be initialized here instead of
; in the code as an option ).
largest dbt 0d


;This list contains 100 numbers ranging from 0
; to 255.
list	dbt 59d,61d,37d,128d,71d,150d,195d,130d,69d,84d
	dbt 171d,227d,99d,214d,233d,136d,80d,253d,242d
	dbt 112d,221d,151d,101d,117d,76d,226d,174d,205d
	dbt 84d,78d,139d,89d,195d,243d,69d,128d,217d,215d
	dbt 57d,100d,227d,226d,233d,238d,229d,228d,135d
	dbt 140d,98d,211d,245d,120d,206d,198d,47d,191d
	dbt 239d,27d,236d,12d,242d,148d,98d,11d,38d,189d
	dbt 238d,225d,142d,214d,214d,21d,75d,17d,190d
	dbt 178d,123d,125d,123d,10d,166d,123d,135d,220d
	dbt 193d,46d,248d,222d,63d,206d,197d,101d,144d
	dbt 201d,233d,12d,241d,85d,180d,29d
	
	end

%/uasm65


%uasm65,description=""
;Program Name: copy.asm.
;
;Version: 1.0.
;
;Description: Copy the contents of list1 to list2.
;
;Assumptions: The numbers in the list will be no 
; lower than 0 and no higher than 255.


;**************************************
;Program entry point.
	org 0200h

;The X register will be used to point to each number in both list1 and list2.
	ldx #0d
	

;Copy the 10 bytes from list1 to list2.
LoopTop  *
	lda list1,x
	sta list2,x
	
	inx
	
	cpx #10d
	
	bne LoopTop
	
	
;Exit the program.
	brk


;**************************************
;Variables area.

;This list contains 10 bytes.
list1	dbt 41h,42h,43h,44h,45h,46h,47h,44h,49h,4ah

;This byte is placed here to make it easier to see the contents of list1
;and list2 when they are dumped in the monitor.
	dbt 0d

;Set aside 10 memory locations and initialize each one to 0d. 
list2	dbt 10d(0d)

	end


%/uasm65




%uasm65,description=""
;Program Name: scan.asm.
;
;Version: 1.0.
;
;Description: Scan list1 and determine how many capital A's and lower case
; a's it contains.
;
;Assumptions: The numbers in the list will be no 
; lower than 0 and no higher than 255.


;**************************************
;Program entry point.
	org 0200h

;The X register will be used to point to each ASCII character in string1
	ldx #0d
	

LoopTop  *
	lda string1,x
	
	
;If we have reached the 0 that has been placed at the end of the string, then
; exit the program.
	cmp #0d
	beq EndOfList
	
CheckLowerCase  *
;If the current character is a lower case 'a', then increment LowerCaseCount.
	cmp #'a'
	bne CheckUpperCase
	inc LowerCaseCount
	jmp NextCharacter
	
CheckUpperCase  *
;If the current character is an upper case 'a', then increment UpperCaseCount.
	cmp #'A'
	bne NextCharacter
	inc UpperCaseCount
	
NextCharacter  *
	inx
	jmp LoopTop
	
EndOfList  *
	
;Exit the program.
	brk


;**************************************
;Variables area.

LowerCaseCount dbt 0d
UpperCaseCount dbt 0d

;This list contains a string of ASCII characters.
string1	dbt "A bird in the hand is worth two in the bush.  Early to bed and "
	dbt "early to rise makes a person healthy, wealthy, and wise", dbt 0d

	end

%/uasm65




%uasm65,description=""
;Program Name: alpha.asm.
;
;Version: 1.01.
;
;Description: Place capital A's in the first 10 bytes of alphaList, capital B's
; in the second 10 bytes of alphalist and so on until alphaList is filled
; with letters.
;
;Assumptions: The numbers in the list will be no 
; lower than 0 and no higher than 255.


;**************************************
;Program entry point.
	org 0200h

;The X register will be used as a pointer.
	ldx #0d
	
	lda #10d
	sta rowCount
	sta columnCount
	
	
;Initialize the 'A' register to be a capital 'A'.
	lda #65d

LoopTop  *
;Place character in list at offset X.
	sta alphalist,x
	
;Point X to the next character position in the list.
	inx
	
;If we have not placed 10 characters in this row yet, then loop.
	dec columnCount
	bne LoopTop
	
;Reset the column counter.
	ldy #10d
	sty columnCount

;Increase to the next letter in the alphabet.
	clc
	adc #1d
	
;If we have not filled 10 rows yet then loop.
	dec rowCount
	bne LoopTop
	
	
EndOfList  *
	
;Exit the program.
	brk


;**************************************
;Variables area.

rowCount 	dbt 0d
columnCount 	dbt 0d
alphalist 	dbt 100d(?)

	end

%/uasm65




%uasm65,description=""
;Program Name: sumlist.asm.
;
;Version: 1.0.
;
;Description: Calculate the sum of the numbers that are in numberlist.
;
;Assumptions: The numbers in the list will be no 
; lower than 0 and no higher than 255.


;**************************************
;Program entry point.
	org 0200h

;The X register will be used as a pointer.
	ldx #0d
	
;Initialize the 16 bit wide variable "sum" to 0.  Note: 8 bits is called a 
; "byte" and 16 bits is called a "word".  sum+0d accesses the high byte of sum
; and sum+1d accesses the low byte of sum.
	lda #0d
	sta sum+0d
	sta sum+1d

LoopTop  *
;Obtain the next number from the list.
	lda numberList,x

;Add the number to the low byte of sum and then place the result back into
; the low byte of sum.
	clc
	adc sum+1d
	sta sum+1d
	
;If the carry flag was set during the addition, this means that the addition 
; resulted in a value that was greater than 255 and the high byte of sum needs
; to be incremented by 1.  If the result was 255 or less, the carry would not
; be set and we can branch around the increment of the high byte of sum.
	bcc NoCarry
Carry *
	inc sum+0d
	
NoCarry *
;Point to the next number in the list and loop back if we have not reached
; the end of the list.
	inx
	cpx #100d
	bne LoopTop
	
;Exit the program.
	brk


;**************************************
;Variables area.

;DWD stands for Define Word and it creates a variable that is 16 bits wide.
; Sum needs to be 16 bits wide because the sum of the numbers in numberList
; will be greater than 255 (which is the largest number that can be held in
; an 8 bit byte).
sum	dwd ?

;This list contains 100 numbers ranging from 0 to 255.
numberList *
	dbt 59d,61d,37d,128d,71d,150d,195d,130d,69d,84d
	dbt 171d,227d,99d,214d,233d,136d,80d,253d,242d
	dbt 112d,221d,151d,101d,117d,76d,226d,174d,205d
	dbt 84d,78d,139d,89d,195d,243d,69d,128d,217d,215d
	dbt 57d,100d,227d,226d,233d,238d,229d,228d,135d
	dbt 140d,98d,211d,245d,120d,206d,198d,47d,191d
	dbt 239d,27d,236d,12d,242d,148d,98d,11d,38d,189d
	dbt 238d,225d,142d,214d,214d,21d,75d,17d,190d
	dbt 178d,123d,125d,123d,10d,166d,123d,135d,220d
	dbt 193d,46d,248d,222d,63d,206d,197d,101d,144d
	dbt 201d,233d,12d,241d,85d,180d,29d

	end



%/uasm65




%uasm65,description=""

%/uasm65



%/group





















%uasm65,description=""
;Program Name: hello.asm.
;
;Version: 1.02.
;
;Description: Print all characters in Mess using OutChar.

;**************************************
;      Program entry point.
;**************************************
	org 0200h

Main *

;Point X to first character of Mess.
	ldx #0d
    
LoopTop *
;Grab a character from Mess.
	lda Mess,x
	
;If the character is the 0 which is at the end
; of Mess, then exit.
	cmp #0d
	beq DonePrint
	
;Call the OutChar monitor utility subroutine.
	jsr 0E003h
	
;Point X to the next character in Mess and loop back.
	inx
	jmp LoopTop
	
DonePrint *
	
;Exit the program.
	brk

;**************************************
;        Variables area.
;**************************************
Mess	dbt "Hello"
	    dbt 0d

	end


%/uasm65


   
   


%uasm65,description=""
;Program Name: blink.asm.
;
;Version: 1.1.
;
;Description: The purpose of this program is to blink
; the lights on and off continuously.
;

;**************************************
;      Program entry point.
;**************************************
	org 0200h

Main *
;Turn all the lights on and then waste some time
; so that the user can see the lights on.
	lda #11111111b
	sta 0a200h
	jsr delay
	
;Turn all the lights off and then waste some time
; so that the user can see the lights off.
	lda #00000000b
	sta 0a200h
	jsr delay
	
	jmp Main
	
;Exit the program.
	brk
	
	
;**************************************
;        Subroutines area.
;**************************************

;**************************************
;Delay subroutine.
;
;The purpose of this subroutine is to generate
; a delay so that the rate of the blinking
; can be controlled.
;
;Change the number that is being loaded into
; the 'A' register to change the delay time.
;**************************************
Delay *
;Save registers on the stack.
	pha
	txa
	pha
	tya
	pha
	
;Change the number that is being loaded into the
; 'A' register in order to change the delay time.
	lda #20d
    sta 0a800h
	
DelayLoop *
    lda 0a800h
    cmp #0d
    bne DelayLoop

	
;Restore registers from the stack.
	pla
	tay
	pla
	tax
	pla

	rts
	

;**************************************
;        Variables area.
;**************************************

	end

%/uasm65

    %output ,preserve="false"
      *** List file ***
      
                      000001 |;Program Name: blink.asm.
                      000002 |;
                      000003 |;Version: 1.1.
                      000004 |;
                      000005 |;Description: The purpose of this program is to blink
                      000006 |; the lights on and off continuously.
                      000007 |;
                      000008 |
                      000009 |;**************************************
                      000010 |;      Program entry point.
                      000011 |;**************************************
      0200            000012 |	org 0200h
                      000013 |
      0200            000014 |Main *
                      000015 |;Turn all the lights on and then waste some time
                      000016 |; so that the user can see the lights on.
      0200 A9 FF      000017 |	lda #11111111b
      0202 8D 00 A2   000018 |	sta 0a200h
      0205 20 14 02   000019 |	jsr delay
                      000020 |	
                      000021 |;Turn all the lights off and then waste some time
                      000022 |; so that the user can see the lights off.
      0208 A9 00      000023 |	lda #00000000b
      020A 8D 00 A2   000024 |	sta 0a200h
      020D 20 14 02   000025 |	jsr delay
                      000026 |	
      0210 4C 00 02   000027 |	jmp Main
                      000028 |	
                      000029 |;Exit the program.
      0213 00         000030 |	brk
                      000031 |	
                      000032 |	
                      000033 |;**************************************
                      000034 |;        Subroutines area.
                      000035 |;**************************************
                      000036 |
                      000037 |;**************************************
                      000038 |;Delay subroutine.
                      000039 |;
                      000040 |;The purpose of this subroutine is to generate
                      000041 |; a delay so that the rate of the blinking
                      000042 |; can be controlled.
                      000043 |;
                      000044 |;Change the number that is being loaded into
                      000045 |; the 'A' register to change the delay time.
                      000046 |;**************************************
      0214            000047 |Delay *
                      000048 |;Save registers on the stack.
      0214 48         000049 |	pha
      0215 8A         000050 |	txa
      0216 48         000051 |	pha
      0217 98         000052 |	tya
      0218 48         000053 |	pha
                      000054 |	
                      000055 |;Change the number that is being loaded into the
                      000056 |; 'A' register in order to change the delay time.
      0219 A9 14      000057 |	lda #20d
      021B 8D 00 A8   000058 |    sta 0a800h
                      000059 |	
      021E            000060 |DelayLoop *
      021E AD 00 A8   000061 |    lda 0a800h
      0221 C9 00      000062 |    cmp #0d
      0223 D0 F9      000063 |    bne DelayLoop
                      000064 |
                      000065 |	
                      000066 |;Restore registers from the stack.
      0225 68         000067 |	pla
      0226 A8         000068 |	tay
      0227 68         000069 |	pla
      0228 AA         000070 |	tax
      0229 68         000071 |	pla
                      000072 |
      022A 60         000073 |	rts
                      000074 |	
                      000075 |
                      000076 |;**************************************
                      000077 |;        Variables area.
                      000078 |;**************************************
                      000079 |
                      000080 |	end
      
      ***Executable code ***
      
      %s19,descrption="Execute this fold to send program to U6502 monitor."
      	S007000055415347C8
      	S1170200A9FF8D00A2201402A9008D00A22014024C0002007D
      	S1170214488A489848A9148D00A8AD00A8C900D0F968A86887
      	S1060228AA68605D
      	S9030000FC
      %/s19

          %output,preserve="false"
            
          %/output

   %/output 





%uasm65,description=""
;Program Name: hello2.asm.
;
;Version: 1.1.
;
;Description: Print all of the characters in Mess using
; PrntMess

;**************************************
;      Program entry point.
;**************************************
	org 0200h

Main *
;Load the low byte of address of Mess into X.
	ldx #Mess<
	
;Load the high byte of address of Mess into Y.
	ldy #Mess>
	
;Call PrntMess monitor utility subroutine.
	jsr 100ch
	
;Exit the program.
	brk

;**************************************
;        Variables area.
;**************************************
Mess	dbt "Hello2"
	dbt 0d

	end

%/uasm65




%uasm65,description=""
;Program Name: hello3.asm.
;
;Version: 1.1.
;
;Description: Print all characters in Mess using PrntMess and
; equs.
;
;Assumptions: When added, the numbers will not be 
; greater than 255.

     ;************************************************************
     ;              Monitor Utility Subroutine Jump Table.
     ;************************************************************
OutChar   equ 1003h ;Output byte in A register to serial port.
                     
GetChar   equ 1006h ;Get a byte from the serial port.
                     
GetCharW  equ 1009h ;Wait and get a byte from the serial port.
                     
PrntMess  equ 100Ch ;Print a message to the serial port.
                     
OutSpace  equ 100Fh ;Output spaces to the serial port.                                 
                     
OutHex    equ 1012h ;Output a HEX number to the serial port.
                     
DgtToBin  equ 1015h ;Convert an ASCII digit into binary.
                     
GetLine   equ 1018h ;Input a line from the serial port.
          


;**************************************                  
;      Program entry point.
;**************************************
	org 0200h                                                       

Main *
	ldx #mess<
	ldy #mess>
	jsr PrntMess
	
;Exit the program.
	brk

;**************************************
;        Variables area.
;**************************************
mess	dbt "Hello3"
	    dbt 0d

	end

%/uasm65



%uasm65,description=""
;Program Name: addinput.asm.
;
;Version: 1.1.
;
;Description: Input 2 single digit numbers from the user, add
; them together, and then output the answer..                             

     ;************************************************************
     ;              Monitor Utility Subroutine Jump Table.
     ;************************************************************
OutChar   equ E003h ;Output byte in reg A to the user.
                     
GetChar   equ E006h ;Get a byte from the serial port.
                     
GetCharW  equ E009h ;Wait and get a byte from the user.
                     
PrntMess  equ E00Ch ;Print a message to the user.
                    
OutSpace  equ E00Fh ;Output spaces to the serial port.                                 
                     
OutHex    equ E012h ;Output a HEX number to the user.
                     
DgtToBin  equ E015h ;Convert an ASCII digit to binary.
                    
GetLine   equ E018h ;Input a line from the serial port.


;**************************************                  
;      Program entry point.
;**************************************
	org 0200h                                                       

Main *
;Ask user to enter the first number.
	ldx #InMess1<
	ldy #InMess1>
	jsr PrntMess
	
;Obtain the first number from the user, convert it from ASCII 
;to binary, and then store it in num1.
	jsr GetCharW
	jsr DgtToBin
	sta num1

;Ask user to enter the second number.
	ldx #InMess2<
	ldy #InMess2>
	jsr PrntMess
	
;Obtain the second number from the user, convert it from ASCII 
;to binary, and then store it in num2.
	jsr GetCharW
	jsr DgtToBin
	sta num2
	
;Add the numbers together and store the answer in sum.
	clc
	lda num1
	adc num2
	sta sum
	
;Inform the user that the answer is being printed.
	ldx #OutMess<
	ldy #OutMess>
	jsr PrntMess
	
;Print the answer.
	lda sum
	jsr OutHex
	
Exit *
;Exit the program.
	brk

;**************************************
;        Variables area.
;**************************************
InMess1 dbt "Enter number 1:"
	  dbt 0d
InMess2 dbt "Enter number 2:"
	  dbt 0d
OutMess dbt "The sum is:"
	  dbt 0d
	
num1	  dbt 0d
num2	  dbt 0d
sum	  dbt 0d

	end



%/uasm65




%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65



%uasm65,description=""

%/uasm65


    
    
