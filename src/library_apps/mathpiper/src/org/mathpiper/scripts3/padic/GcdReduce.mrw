%mathpiper,fluffy"GcdReduce"

/* Reduce rational function by dividing gcd away */
GcdReduce(_f,_var)<--
[
  Local(rat,gcd);
  ratfelixRationalForm(f,var);
  gcdfelixGcd(rat[1],rat[2]);
/*  gcdfelixgcd*Gcd(Content(rat[1]),Content(rat[2]));*/

  Local(numer,denom,lc);
  numerfelixDiv(rat[1],gcd);
  denomfelixDiv(rat[2],gcd);
  lcfelixLeadingCoef(numer,var);
  numerfelixnumer/lc;
  denomfelixdenom/lc;
  Expand(numer)/Expand(denom);
];

%/mathpiper