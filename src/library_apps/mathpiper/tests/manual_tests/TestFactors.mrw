%mathpiper,title="TestFactors"

//########################################################################
//       T E S T I N G     T E S T I N G     T E S T I N G
//########################################################################

// a bunch of expressions for testing
expressions := {};
Push( expressions, {24,{{2,3},{3,1}}} );
Push( expressions, {-7*x-14*y,{{-7,1},{x+2*y,1}} } );
Push( expressions, {x^2-4,{{x+2,1},{x-2,1}}} );
Push( expressions, {x^2+2*x+1,{{x+1,2}}} );
Push( expressions, {-9*x^2+45*x-36,{{-9,1},{x-4,1},{x-1,1}}} );
Push( expressions, {x^2-a^2,{{x+a,1},{x-a,1}}} );
Push( expressions, {9*x^2-1,{{3*x-1,1},{3*x+1,1}}} );
Push( expressions, {x^3-y^3,{{x-y,1},{x^2+x*y+y^2,1}}} );
Push( expressions, {4*x^3+12*x^2-40*x,{{4,1},{x+5,1},{x-2,1},{x,1}}} );
Push( expressions, {32*x^3+32*x^2-70*x-75,{{4*x+5,2},{2*x-3,1}}} );
Push( expressions, {3*x^3-12*x^2-2*x+8,{{3*x^2-2,1},{x-4,1}}} );
Push( expressions, {x^3+3*x^2-25*x-75,{{x-5,1},{x+5,1},{x+3,1}}} );
Push( expressions, {2*x^3-30*x^2+12*x^4,{{2,1},{x,2},{3*x+5,1},{2*x-3,1}}} );
Push( expressions, {5*x^7-20*x^6+25*x^5-20*x^4+25*x^3-20*x^2+20*x,{{5,1},{x,1},{x^2+x+1,1},{x^2-x+1,1},{x-2,2}}} );
Push( expressions, {(2/5)*x^2-2*x-(12/5), {{2/5,1},{x+1,1},{x-6,1}}} );
Push( expressions, {0.4*x^2-2*x-2.4, {{2/5,1},{x+1,1},{x-6,1}}} );
Push( expressions, {9*x^2.0 -1,{{3*x-1,1},{3*x+1,1}}} );
//Push( expressions, {,{{},{},{},{}}} );

NewLine(2);  Tell("TEST Factors()");
expressions := Reverse(expressions);
Local(i);   i := 0;
ForEach(q,expressions)
[
    i := i + 1;     
    Check(i<20, ">>>>> FORCED STOP <<<<<");
    f := q[1];
    g := q[2];
    Tell("-------------------------------------------------------------------");
    Tell(i);
    Tell(">>> Test Factors() on polynomial: ",f);
    stk := {};
    r   := Factors(f);
    SysOut("             Factors(f)=",r);
    rmg := Simplify(Expand(UnFlatten(r-g,"+",0)));
    If( IsZero(rmg) Or IsZeroVector(rmg), 
           SysOut("             Answer is CORRECT"),
           SysOut("             Answer is WRONG:  it should be ",g)
       );
];

%/mathpiper
